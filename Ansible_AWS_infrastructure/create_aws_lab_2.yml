---
- name: Play to create EC2 resources and finally a RHEL 8 instance.
  hosts: localhost
  vars:
    aws_region: us-east-2
    aws_instance_type: t2.micro
    aws_instance_rhel8_id: ami-0ba62214afa52bec7
    aws_key_pair_name: demo

  tasks:
    - name: Crear instancia EC2
      amazon.aws.ec2_instance:
        region: "{{ aws_region }}"
        instance_type: "{{ aws_instance_type }}"
        image: "{{ aws_instance_rhel8_id }}"
        key_name: '{{ aws_key_pair_name }}'
        count: '{{ number_of_rhels }}'
        group_id: ansible_tower_sg
        wait: True
      register: ec2_instance

    - name: Mostrar informaci√≥n de la instancia creada
      debug:
        var: ec2_instance.instances